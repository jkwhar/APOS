<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Bulk Add Parts</title>
</head>
<body>

<h1>Bulk Add Parts (5 rows)</h1>

<p><a href="/">Back to Home</a></p>

<form action="/add/bulk" method="post">

<p>
    Global Category:
    <select id="global_category">
        <option value="">-- None --</option>
        {% for cat in categories %}
        <option value="{{ cat.name }}">{{ cat.name }}</option>
        {% endfor %}
    </select>
    <button type="button" onclick="applyCategoryToAll()">Apply to All Rows</button>
</p>

<p>
    Global Store:
    <select id="global_store">
        <option value="">-- None --</option>
        {% for s in stores %}
        <option value="{{ s.name }}">{{ s.name }}</option>
        {% endfor %}
    </select>
    <button type="button" onclick="applyStoreToAll()">Apply to All Rows</button>
</p>

<table border="1" cellpadding="5" cellspacing="0">
    <tr>
        <th>Part Number</th>
        <th>Category</th>
        <th>Store</th>
        <th>Description</th>
        <th>Price</th>
        <th>Quantity</th>
        <th>Barcode</th>
        <th>Bin Code</th>
    </tr>

    {% for r in rows %}
    <tr>
        <td><input type="text" name="part_number"
           onblur="autoFillFromPartNumber(this)"></td>

        <td>
            <select name="category" class="row_category">
                <option value="">-- None --</option>
                {% for cat in categories %}
                <option value="{{ cat.name }}">{{ cat.name }}</option>
                {% endfor %}
            </select>
        </td>

        <td>
            <select name="store" class="row_store">
                <option value="">-- None --</option>
                {% for s in stores %}
                <option value="{{ s.name }}">{{ s.name }}</option>
                {% endfor %}
            </select>
        </td>

        <td><input type="text" name="description"></td>
        <td><input type="number" step="0.01" name="price"></td>
        <td><input type="number" name="quantity" value="0"></td>
        <td><input type="text" name="barcode"></td>
        <td><input type="text" name="bin_code"></td>
    </tr>
    {% endfor %}
</table>

<br>
<button type="submit">Add All Parts</button>

</form>

<script>
function applyCategoryToAll() {
    const value = document.getElementById('global_category').value;
    document.querySelectorAll('.row_category').forEach(x => x.value = value);
}
function applyStoreToAll() {
    const value = document.getElementById('global_store').value;
    document.querySelectorAll('.row_store').forEach(x => x.value = value);
}

</script>
<script src="/static/autofill.js"></script>

</body>
</html>